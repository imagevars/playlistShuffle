import{r as de}from"./react-dom-c53c899c.js";import{r as l,R as O}from"./react-c64dbe91.js";import{h as ee}from"./hoist-non-react-statics-dd442a32.js";import{r as pe}from"./react-is-d0c61868.js";import{s as be}from"./use-sync-external-store-ba804a53.js";import{a as oe,_ as L}from"./@babel-5b6df6e6.js";function ye(e){e()}let se=ye;const he=e=>se=e,Se=()=>se,ue=l.createContext(null),we=()=>{throw new Error("uSES not initialized!")},me=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Ce(e,t,r,o,{areStatesEqual:s,areOwnPropsEqual:n,areStatePropsEqual:a}){let c=!1,i,u,f,d,p;function N(y,h){return i=y,u=h,f=e(i,u),d=t(o,u),p=r(f,d,u),c=!0,p}function M(){return f=e(i,u),t.dependsOnOwnProps&&(d=t(o,u)),p=r(f,d,u),p}function k(){return e.dependsOnOwnProps&&(f=e(i,u)),t.dependsOnOwnProps&&(d=t(o,u)),p=r(f,d,u),p}function b(){const y=e(i,u),h=!a(y,f);return f=y,h&&(p=r(f,d,u)),p}function R(y,h){const P=!n(h,u),$=!s(y,i,h,u);return i=y,u=h,P&&$?M():P?k():$?b():p}return function(h,P){return c?R(h,P):N(h,P)}}function Pe(e,t){let{initMapStateToProps:r,initMapDispatchToProps:o,initMergeProps:s}=t,n=oe(t,me);const a=r(e,n),c=o(e,n),i=s(e,n);return Ce(a,c,i,e,n)}function ge(e,t){const r={};for(const o in e){const s=e[o];typeof s=="function"&&(r[o]=(...n)=>t(s(...n)))}return r}function J(e){return function(r){const o=e(r);function s(){return o}return s.dependsOnOwnProps=!1,s}}function te(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function ce(e,t){return function(o,{displayName:s}){const n=function(c,i){return n.dependsOnOwnProps?n.mapToProps(c,i):n.mapToProps(c,void 0)};return n.dependsOnOwnProps=!0,n.mapToProps=function(c,i){n.mapToProps=e,n.dependsOnOwnProps=te(e);let u=n(c,i);return typeof u=="function"&&(n.mapToProps=u,n.dependsOnOwnProps=te(u),u=n(c,i)),u},n}}function K(e,t){return(r,o)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${o.wrappedComponentName}.`)}}function xe(e){return e&&typeof e=="object"?J(t=>ge(e,t)):e?typeof e=="function"?ce(e):K(e,"mapDispatchToProps"):J(t=>({dispatch:t}))}function Me(e){return e?typeof e=="function"?ce(e):K(e,"mapStateToProps"):J(()=>({}))}function Re(e,t,r){return L({},r,e,t)}function Oe(e){return function(r,{displayName:o,areMergedPropsEqual:s}){let n=!1,a;return function(i,u,f){const d=e(i,u,f);return n?s(d,a)||(a=d):(n=!0,a=d),a}}}function Ne(e){return e?typeof e=="function"?Oe(e):K(e,"mergeProps"):()=>Re}function Ee(){const e=Se();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let o=t;for(;o;)o.callback(),o=o.next})},get(){let o=[],s=t;for(;s;)o.push(s),s=s.next;return o},subscribe(o){let s=!0,n=r={callback:o,next:null,prev:r};return n.prev?n.prev.next=n:t=n,function(){!s||t===null||(s=!1,n.next?n.next.prev=n.prev:r=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}}const ne={notify(){},get:()=>[]};function ie(e,t){let r,o=ne;function s(d){return i(),o.subscribe(d)}function n(){o.notify()}function a(){f.onStateChange&&f.onStateChange()}function c(){return!!r}function i(){r||(r=t?t.addNestedSub(a):e.subscribe(a),o=Ee())}function u(){r&&(r(),r=void 0,o.clear(),o=ne)}const f={addNestedSub:s,notifyNestedSubs:n,handleChangeWrapper:a,isSubscribed:c,trySubscribe:i,tryUnsubscribe:u,getListeners:()=>o};return f}const Fe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A=Fe?l.useLayoutEffect:l.useEffect;function re(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function G(e,t){if(re(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!re(e[r[s]],t[r[s]]))return!1;return!0}const ve=["reactReduxForwardedRef"];let ae=we;const _e=e=>{ae=e},Ue=[null,null];function ke(e,t,r){A(()=>e(...t),r)}function Be(e,t,r,o,s,n){e.current=o,r.current=!1,s.current&&(s.current=null,n())}function Ie(e,t,r,o,s,n,a,c,i,u,f){if(!e)return()=>{};let d=!1,p=null;const N=()=>{if(d||!c.current)return;const k=t.getState();let b,R;try{b=o(k,s.current)}catch(y){R=y,p=y}R||(p=null),b===n.current?a.current||u():(n.current=b,i.current=b,a.current=!0,f())};return r.onStateChange=N,r.trySubscribe(),N(),()=>{if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,p)throw p}}function Le(e,t){return e===t}function He(e,t,r,{pure:o,areStatesEqual:s=Le,areOwnPropsEqual:n=G,areStatePropsEqual:a=G,areMergedPropsEqual:c=G,forwardRef:i=!1,context:u=ue}={}){const f=u,d=Me(e),p=xe(t),N=Ne(r),M=!!e;return b=>{const R=b.displayName||b.name||"Component",y=`Connect(${R})`,h={shouldHandleStateChanges:M,displayName:y,wrappedComponentName:R,WrappedComponent:b,initMapStateToProps:d,initMapDispatchToProps:p,initMergeProps:N,areStatesEqual:s,areStatePropsEqual:a,areOwnPropsEqual:n,areMergedPropsEqual:c};function P(w){const[m,V,g]=l.useMemo(()=>{const{reactReduxForwardedRef:S}=w,U=oe(w,ve);return[w.context,S,U]},[w]),E=l.useMemo(()=>m&&m.Consumer&&pe.isContextConsumer(O.createElement(m.Consumer,null))?m:f,[m,f]),C=l.useContext(E),F=!!w.store&&!!w.store.getState&&!!w.store.dispatch,le=!!C&&!!C.store,x=F?w.store:C.store,Q=le?C.getServerState:x.getState,W=l.useMemo(()=>Pe(x.dispatch,h),[x]),[v,X]=l.useMemo(()=>{if(!M)return Ue;const S=ie(x,F?void 0:C.subscription),U=S.notifyNestedSubs.bind(S);return[S,U]},[x,F,C]),Z=l.useMemo(()=>F?C:L({},C,{subscription:v}),[F,C,v]),q=l.useRef(),z=l.useRef(g),_=l.useRef(),j=l.useRef(!1);l.useRef(!1);const T=l.useRef(!1),H=l.useRef();A(()=>(T.current=!0,()=>{T.current=!1}),[]);const D=l.useMemo(()=>()=>_.current&&g===z.current?_.current:W(x.getState(),g),[x,g]),fe=l.useMemo(()=>U=>v?Ie(M,x,v,W,z,q,j,T,_,X,U):()=>{},[v]);ke(Be,[z,q,j,g,_,X]);let I;try{I=ae(fe,D,Q?()=>W(Q(),g):D)}catch(S){throw H.current&&(S.message+=`
The error may be correlated with this previous error:
${H.current.stack}

`),S}A(()=>{H.current=void 0,_.current=void 0,q.current=I});const Y=l.useMemo(()=>O.createElement(b,L({},I,{ref:V})),[V,b,I]);return l.useMemo(()=>M?O.createElement(E.Provider,{value:Z},Y):Y,[E,Y,Z])}const B=O.memo(P);if(B.WrappedComponent=b,B.displayName=P.displayName=y,i){const m=O.forwardRef(function(g,E){return O.createElement(B,L({},g,{reactReduxForwardedRef:E}))});return m.displayName=y,m.WrappedComponent=b,ee(m,b)}return ee(B,b)}}function Ye({store:e,context:t,children:r,serverState:o}){const s=l.useMemo(()=>{const c=ie(e);return{store:e,subscription:c,getServerState:o?()=>o:void 0}},[e,o]),n=l.useMemo(()=>e.getState(),[e]);A(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),n!==e.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,n]);const a=t||ue;return O.createElement(a.Provider,{value:s},r)}_e(be.useSyncExternalStore);he(de.unstable_batchedUpdates);export{Ye as P,He as c};
